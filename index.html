<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>我决策 - I decide</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="container">
		<!-- 转盘区域：你可以把 WXML 的结构逐步迁到这里 -->
		<div class="wheel-container">
			<div class="wheel">
				<div id="wheelSection" class="wheel-section">
					<div id="sector1Label" class="sector1-label">打游戏</div>
				</div>
				<div id="sector2Label" class="sector2-label">干活</div>
			</div>

			<div id="pointer" class="pointer">
				<div class="pointer-triangle"></div>
			</div>

			<div class="center-dot"></div>
		</div>

		<button id="configBtn" class="btn config-btn">修改</button>
		<button id="spinBtn" class="btn spin-btn">决策</button>

		<div id="result" class="result"></div>

		<div class="footer" id="githubLink">
			<span class="footer-text">开源代码 Kyunana097 @ GitHub</span>
			<span class="footer-icon">↗</span>
		</div>
	</div>

	<script>
		// === 基础 JS 状态：对应小程序 data 的一个简化版本 ===
		const state = {
			rotateAngle: 0,
			isSpinning: false,
			duration: 4000,
			sectorPercent: 30,
			sector1Text: '打游戏',
			sector2Text: '干活'
		};

		const wheelSection = document.getElementById('wheelSection');
		const pointer = document.getElementById('pointer');
		const spinBtn = document.getElementById('spinBtn');
		const resultEl = document.getElementById('result');
		const githubLink = document.getElementById('githubLink');

		// 简化版：只做一个“旋转 + 固定结果”示例，核心迁移逻辑你可以参考小程序 index.js 自行完善
		function updateSectorStyle() {
			wheelSection.style.transform = `rotate(${state.rotateAngle}deg)`;
		}

		function startSpin() {
			if (state.isSpinning) return;

			const minSpins = 5;
			const randomAngle = Math.floor(Math.random() * 270);
			const totalAngle = state.rotateAngle + minSpins * 360 + randomAngle;

			state.isSpinning = true;
			state.rotateAngle = totalAngle;
			resultEl.textContent = '';

			spinBtn.disabled = true;
			spinBtn.textContent = '决策中...';

			pointer.style.transform = `rotate(${state.rotateAngle}deg)`;
			updateSectorStyle();

			setTimeout(() => {
				state.isSpinning = false;
				spinBtn.disabled = false;
				spinBtn.textContent = '决策';
				// 这里直接固定结果为 sector1Text，对应小程序 calculateResult
				resultEl.textContent = state.sector1Text;
				// 彩纸动画、配置弹窗等你可以参考小程序 index.js 继续往下迁
			}, state.duration);
		}

		spinBtn.addEventListener('click', startSpin);

		githubLink.addEventListener('click', () => {
			window.open('https://github.com/Kyunana097/I_decide_web', '_blank');
		});

		// 初始样式
		updateSectorStyle();
	</script>
</body>
</html>
